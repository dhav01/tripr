{"ast":null,"code":"import _defineProperty from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import fire from'./Firebase';import'../Components/Style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dup=[{}];var temp=[];export var GetDataFromForm=/*#__PURE__*/function(_Component){_inherits(GetDataFromForm,_Component);var _super=_createSuper(GetDataFromForm);function GetDataFromForm(props){var _this;_classCallCheck(this,GetDataFromForm);_this=_super.call(this,props);_this.handleSubmit=function(e){if(fire.auth().currentUser!=null){console.log('user'+fire.auth().currentUser.uid);}e.preventDefault();for(var i=0;i<dup.length;i++){if(dup[i].deptDate===_this.props.departureDate&&dup[i].destination===_this.props.destination&&dup[i].source===_this.props.source){temp[i]=dup[i];console.log('data found at: '+i);}else{console.log('different data');}}console.log('size of temp: '+temp.length);_this.setState({flight:temp});temp=[];// refernce.push(data)\n// fire\n//   .database()\n//   .ref('search')\n//   .ref('destination')\n//   .push(this.props.destination)\n// fire.database().ref('search'). .push('hello dhaval')\n};_this.renderMap=function(){console.log('length: '+_this.state.flight.length);return Object.entries(_this.state.flight).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"cardview\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"source\",children:value.airlines}),/*#__PURE__*/_jsxs(\"div\",{class:\"timing\",children:[value.deptTime,\"-\",value.arrivalTime]}),/*#__PURE__*/_jsx(\"div\",{class:\"duration\",children:value.duration}),/*#__PURE__*/_jsx(\"div\",{class:\"source\",children:value.source}),/*#__PURE__*/_jsx(\"div\",{class:\"destination\",children:value.destination}),/*#__PURE__*/_jsx(\"div\",{class:\"departure\",children:value.deptDate}),/*#__PURE__*/_jsx(\"div\",{class:\"price\",children:value.price}),/*#__PURE__*/_jsx(\"button\",{class:\"info-btn\",hidden:value.seats==null?true:false,onClick:function onClick(e){e.preventDefault();_this.handleInfo(key);},children:\"More info\"}),Object.keys(_this.state.showMore).length>0&&_this.state.showMore[key]&&/*#__PURE__*/_jsx(\"div\",{class:\"cardview2\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"more-info\",id:\"id-\".concat(key),children:[' ',/*#__PURE__*/_jsxs(\"div\",{class:\"seatsavailable\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Seats Available: \"}),\" \",value.seats]}),/*#__PURE__*/_jsxs(\"div\",{class:\"airports\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"airport\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Source: \"}),value.dept]}),/*#__PURE__*/_jsxs(\"div\",{class:\"airport\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Destination: \"}),value.arrival]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{class:\"book-btn\",href:value.link,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Book\"})})]})]})})]})},key);});};_this.state={flight:[],showMore:{}};return _this;}_createClass(GetDataFromForm,[{key:\"componentDidMount\",value:function componentDidMount(){console.log('ComponentDidMount method called');var ref=fire.database().ref().child('FlightsData');ref.on('value',function(snap){dup=snap.val();console.log(dup);});}},{key:\"handleInfo\",value:function handleInfo(key){//alert('value:' + para.seats)\nthis.setState(function(prevState){return{showMore:_defineProperty({},key,!(Object.keys(prevState.showMore).length>0&&prevState.showMore[key]))};});// let ref = fire.database().ref('history')\n// ref.child(fire.auth().currentUser.uid).push(key)\n}// info = (value) => {\n//   return this.state.showMore ? <div>{value.seats}</div> : null\n// }\n},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{class:\"sub-btn\",onClick:this.handleSubmit,children:\"Submit Data\"}),this.renderMap()]});}}]);return GetDataFromForm;}(Component);export default GetDataFromForm;","map":{"version":3,"sources":["C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/src/Components/GetDataFromForm.js"],"names":["React","Component","fire","dup","temp","GetDataFromForm","props","handleSubmit","e","auth","currentUser","console","log","uid","preventDefault","i","length","deptDate","departureDate","destination","source","setState","flight","renderMap","state","Object","entries","map","key","value","airlines","deptTime","arrivalTime","duration","price","seats","handleInfo","keys","showMore","dept","arrival","link","ref","database","child","on","snap","val","prevState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport fire from './Firebase'\r\nimport '../Components/Style.css'\r\n\r\nvar dup = [{}]\r\nvar temp = []\r\nexport class GetDataFromForm extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      flight: [],\r\n      showMore: {},\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('ComponentDidMount method called')\r\n    var ref = fire.database().ref().child('FlightsData')\r\n    ref.on('value', (snap) => {\r\n      dup = snap.val()\r\n      console.log(dup)\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    if (fire.auth().currentUser != null) {\r\n      console.log('user' + fire.auth().currentUser.uid)\r\n    }\r\n    e.preventDefault()\r\n\r\n    for (var i = 0; i < dup.length; i++) {\r\n      if (\r\n        dup[i].deptDate === this.props.departureDate &&\r\n        dup[i].destination === this.props.destination &&\r\n        dup[i].source === this.props.source\r\n      ) {\r\n        temp[i] = dup[i]\r\n        console.log('data found at: ' + i)\r\n      } else {\r\n        console.log('different data')\r\n      }\r\n    }\r\n    console.log('size of temp: ' + temp.length)\r\n\r\n    this.setState({\r\n      flight: temp,\r\n    })\r\n\r\n    temp = []\r\n\r\n    // refernce.push(data)\r\n    // fire\r\n    //   .database()\r\n    //   .ref('search')\r\n    //   .ref('destination')\r\n    //   .push(this.props.destination)\r\n    // fire.database().ref('search'). .push('hello dhaval')\r\n  }\r\n\r\n  handleInfo(key) {\r\n    //alert('value:' + para.seats)\r\n    this.setState((prevState) => ({\r\n      showMore: {\r\n        [key]: !(\r\n          Object.keys(prevState.showMore).length > 0 && prevState.showMore[key]\r\n        ),\r\n      },\r\n    }))\r\n\r\n    // let ref = fire.database().ref('history')\r\n    // ref.child(fire.auth().currentUser.uid).push(key)\r\n  }\r\n\r\n  // info = (value) => {\r\n  //   return this.state.showMore ? <div>{value.seats}</div> : null\r\n  // }\r\n\r\n  renderMap = () => {\r\n    console.log('length: ' + this.state.flight.length)\r\n    return Object.entries(this.state.flight).map(([key, value]) => (\r\n      <div key={key}>\r\n        <div class='cardview'>\r\n          <div class='source'>{value.airlines}</div>\r\n          <div class='timing'>\r\n            {value.deptTime}-{value.arrivalTime}\r\n          </div>\r\n          <div class='duration'>{value.duration}</div>\r\n          <div class='source'>{value.source}</div>\r\n          <div class='destination'>{value.destination}</div>\r\n          <div class='departure'>{value.deptDate}</div>\r\n          <div class='price'>{value.price}</div>\r\n          <button\r\n            class='info-btn'\r\n            hidden={value.seats == null ? true : false}\r\n            onClick={(e) => {\r\n              e.preventDefault()\r\n              this.handleInfo(key)\r\n            }}\r\n          >\r\n            More info\r\n          </button>\r\n          {Object.keys(this.state.showMore).length > 0 &&\r\n            this.state.showMore[key] && (\r\n              <div class='cardview2'>\r\n                <div class='more-info' id={`id-${key}`}>\r\n                  {' '}\r\n                  <div class='seatsavailable'>\r\n                    <p>Seats Available: </p> {value.seats}\r\n                  </div>\r\n                  <div class='airports'>\r\n                    <div class='airport'>\r\n                      <p>Source: </p>\r\n                      {value.dept}\r\n                    </div>\r\n                    <div class='airport'>\r\n                      <p>Destination: </p>\r\n                      {value.arrival}\r\n                    </div>\r\n                    <div>\r\n                      {/* <button\r\n                        class='book-btn'\r\n                        onClick={(e) => {\r\n                          e.preventDefault()\r\n                          let link = value.link\r\n                          window.open({ link }, '_blank')\r\n                        }}\r\n                      >\r\n                        Book\r\n                      </button> */}\r\n                      <a\r\n                        class='book-btn'\r\n                        href={value.link}\r\n                        target='_blank'\r\n                        rel='noopener noreferrer'\r\n                      >\r\n                        Book\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <button class='sub-btn' onClick={this.handleSubmit}>\r\n          Submit Data\r\n        </button>\r\n        {this.renderMap()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GetDataFromForm\r\n"]},"metadata":{},"sourceType":"module"}