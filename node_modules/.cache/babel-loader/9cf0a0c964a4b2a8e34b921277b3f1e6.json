{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\triprtrail\\\\src\\\\Components\\\\GetDataFromForm.js\";\nimport React, { Component } from 'react';\nimport fire from './Firebase';\nimport FunComp from './FunComp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dup = [{}];\nvar temp = [{}];\nexport class GetDataFromForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      if (fire.auth().currentUser != null) {\n        console.log('user' + fire.auth().currentUser.uid);\n      }\n\n      e.preventDefault();\n\n      for (var i = 0; i < dup.length; i++) {\n        if (dup[i].source == this.props.source && dup[i].destination == this.props.destination && dup[i].deptDate == this.props.departureDate) {\n          console.log('baroda');\n          temp[i] = dup[i];\n        } else {\n          console.log('not working');\n        }\n      }\n\n      this.setState({\n        flight: temp\n      });\n      temp = [{}];\n      console.log('state value' + this.state.flight[0]); // refernce.push(data)\n      // fire\n      //   .database()\n      //   .ref('search')\n      //   .ref('destination')\n      //   .push(this.props.destination)\n      // fire.database().ref('search'). .push('hello dhaval')\n    };\n\n    this.info = value => {\n      return this.state.showMore ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: value.seats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 34\n      }, this) : null;\n    };\n\n    this.renderMap = () => {\n      if (this.state.flight.length > 0) {\n        return Object.entries(this.state.flight).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: value.source\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: value.destination\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: value.deptDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            hidden: value.seats == null ? true : false,\n            onClick: e => {\n              e.preventDefault();\n              this.handleInfo(value);\n            },\n            children: \"More info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this), this.info(value)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this));\n      } else {\n        ;\n\n        /*#__PURE__*/\n        _jsxDEV(\"p\", {\n          children: \"No flights available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 8\n        }, this);\n\n        console.log('no data found');\n      }\n    };\n\n    this.state = {\n      flight: [],\n      showMore: false\n    };\n  }\n\n  componentDidMount() {\n    console.log('ComponentDidMount method called');\n    var ref = fire.database().ref().child('FlightsData');\n    ref.on('value', snap => {\n      dup = snap.val();\n      console.log(dup);\n    });\n  }\n\n  // handleInfo = (value) => (event) => {\n  //   event.preventDefault()\n  //   {\n  //     alert(value.seats)\n  //   }\n  //   return <h1>{value.seats}</h1>\n  // }\n  handleInfo(para) {\n    //alert('value:' + para.seats)\n    this.setState(prevState => ({\n      showMore: !prevState.showMore\n    }));\n    let ref = fire.database().ref('history');\n    ref.child(fire.auth().currentUser.uid).push(para);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleSubmit,\n        children: \"Submit Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), this.renderMap]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default GetDataFromForm;","map":{"version":3,"sources":["C:/Users/dhaval agrawal/OneDrive/Desktop/triprtrail/src/Components/GetDataFromForm.js"],"names":["React","Component","fire","FunComp","dup","temp","GetDataFromForm","constructor","props","handleSubmit","e","auth","currentUser","console","log","uid","preventDefault","i","length","source","destination","deptDate","departureDate","setState","flight","state","info","value","showMore","seats","renderMap","Object","entries","map","key","handleInfo","componentDidMount","ref","database","child","on","snap","val","para","prevState","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport fire from './Firebase'\r\nimport FunComp from './FunComp'\r\n\r\nvar dup = [{}]\r\nvar temp = [{}]\r\nexport class GetDataFromForm extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      flight: [],\r\n      showMore: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('ComponentDidMount method called')\r\n    var ref = fire.database().ref().child('FlightsData')\r\n    ref.on('value', (snap) => {\r\n      dup = snap.val()\r\n      console.log(dup)\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    if (fire.auth().currentUser != null) {\r\n      console.log('user' + fire.auth().currentUser.uid)\r\n    }\r\n    e.preventDefault()\r\n\r\n    for (var i = 0; i < dup.length; i++) {\r\n      if (\r\n        dup[i].source == this.props.source &&\r\n        dup[i].destination == this.props.destination &&\r\n        dup[i].deptDate == this.props.departureDate\r\n      ) {\r\n        console.log('baroda')\r\n        temp[i] = dup[i]\r\n      } else {\r\n        console.log('not working')\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      flight: temp,\r\n    })\r\n    temp = [{}]\r\n    console.log('state value' + this.state.flight[0])\r\n\r\n    // refernce.push(data)\r\n    // fire\r\n    //   .database()\r\n    //   .ref('search')\r\n    //   .ref('destination')\r\n    //   .push(this.props.destination)\r\n    // fire.database().ref('search'). .push('hello dhaval')\r\n  }\r\n\r\n  // handleInfo = (value) => (event) => {\r\n  //   event.preventDefault()\r\n  //   {\r\n  //     alert(value.seats)\r\n  //   }\r\n  //   return <h1>{value.seats}</h1>\r\n  // }\r\n\r\n  handleInfo(para) {\r\n    //alert('value:' + para.seats)\r\n    this.setState((prevState) => ({\r\n      showMore: !prevState.showMore,\r\n    }))\r\n\r\n    let ref = fire.database().ref('history')\r\n    ref.child(fire.auth().currentUser.uid).push(para)\r\n  }\r\n\r\n  info = (value) => {\r\n    return this.state.showMore ? <div>{value.seats}</div> : null\r\n  }\r\n\r\n  renderMap = () => {\r\n    if (this.state.flight.length > 0) {\r\n      return Object.entries(this.state.flight).map(([key, value]) => (\r\n        <div key={key}>\r\n          <div>{value.source}</div>\r\n          <div>{value.destination}</div>\r\n          <div>{value.deptDate}</div>\r\n          <button\r\n            hidden={value.seats == null ? true : false}\r\n            onClick={(e) => {\r\n              e.preventDefault()\r\n              this.handleInfo(value)\r\n            }}\r\n          >\r\n            More info\r\n          </button>\r\n          {this.info(value)}\r\n        </div>\r\n      ))\r\n    } else {\r\n      ;<p>No flights available</p>\r\n      console.log('no data found')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <button onClick={this.handleSubmit}>Submit Data</button>\r\n        {this.renderMap}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GetDataFromForm\r\n"]},"metadata":{},"sourceType":"module"}